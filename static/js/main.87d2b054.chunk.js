(this["webpackJsonpgerman-learning-notes"]=this["webpackJsonpgerman-learning-notes"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(7),o=n.n(r),c=(n(14),n(1)),u=n(2),m=n(5);var i=n(8);function s(e,t){return"object"===typeof e?t?JSON.parse(t):e:t||e}function d(e,t){var n=a.useState(s(t,window.localStorage.getItem(e))),l=Object(c.a)(n,2),r=l[0],o=l[1];a.useEffect((function(){var n=window.localStorage.getItem(e);r!==n&&o(s(t,n))}),[]);var u=a.useCallback((function(n){n.key===e&&n.newValue!==r&&o(s(t,n.newValue))}),[t,e,r]);return a.useEffect((function(){return window.addEventListener("storage",u),function(){return window.removeEventListener("storage",u)}}),[u]),[r,function(n){o(n),window.localStorage.setItem(e,function(e,t){return"object"===typeof e?JSON.stringify(t||e):t||e}(t,n))}]}var f=a.createContext({}),g=function(e){var t=e.children,n=d("projects",[]),l=Object(c.a)(n,2),r=l[0],o=l[1],u=d("selectedProject",""),m=Object(c.a)(u,2),s=m[0],g=m[1];return a.createElement(f.Provider,{value:{projects:r,selectedProject:r.find((function(e){return e.googleSheetId===s})),addProject:function(e){o([].concat(Object(i.a)(r),[e]))},removeProject:function(e){o(r.filter((function(t){return t.googleSheetId!==e})))},selectProject:function(e){g(e)}}},t)},h=function(){var e=a.useContext(f).addProject,t=a.useState({name:"",googleSheetId:"",columns:"",weightColumnName:""}),n=Object(c.a)(t,2),l=n[0],r=n[1],o=function(e){return function(t){var n=t.target.value;r((function(t){return Object(m.a)({},t,Object(u.a)({},e,n))}))}},i=l.columns.split(",");return a.createElement("form",{onSubmit:function(t){t.preventDefault(),Object.values(l).filter((function(e){return null===e&&""===e})).length<2&&e(l)}},a.createElement("div",null,a.createElement("label",{htmlFor:"name"},"Project Name"),a.createElement("input",{onChange:o("name"),type:"text",name:"name",value:l.name})),a.createElement("div",null,a.createElement("label",{htmlFor:"googleSheetId"},"Google Sheet Id"),a.createElement("input",{onChange:o("googleSheetId"),type:"text",name:"googleSheetId",value:l.googleSheetId})),a.createElement("div",null,a.createElement("label",{htmlFor:"columns"},"Columns (seperate with comma)"),a.createElement("input",{onChange:o("columns"),type:"text",name:"columns",value:l.columns})),a.createElement("div",null,a.createElement("label",{htmlFor:"weightColumnName"},"Weight Column Name"),a.createElement("select",{onChange:o("weightColumnName"),name:"weightColumnName",id:"weightColumnName",defaultValue:i[0]},i.map((function(e,t){return a.createElement("option",{key:e,value:e},e)})))),a.createElement("button",{type:"submit"},"Add"))},E=function(){var e=a.useContext(f),t=e.projects,n=e.selectProject;return a.createElement("div",null,t.map((function(e){return a.createElement("div",{key:e.googleSheetId},a.createElement("button",{onClick:function(){return n(e.googleSheetId)}},e.name))})),a.createElement(h,null))},v=a.createContext({}),p=function(e){var t=e.children,n=a.useContext(f).selectedProject,l=a.useState(null),r=Object(c.a)(l,2),o=r[0],i=r[1];return a.useEffect((function(){n&&fetch("https://spreadsheets.google.com/feeds/list/".concat(n.googleSheetId,"/1/public/full?alt=json")).then((function(e){return e.json()})).then((function(e){n&&i(function(e,t){return t.feed.entry.map((function(t){return e.columns.split(",").reduce((function(e,n){return Object(m.a)({},e,Object(u.a)({},n,t["gsx$".concat(n)].$t))}),{})}))}(n,e))}))}),[n]),n?a.createElement(v.Provider,{value:{data:o||[],getData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return e(o||[])}}},o?a.createElement(a.Fragment,null,t):a.createElement(a.Fragment,null,"Loading")):a.createElement(E,null)};function w(e,t){var n=function(e,t){if(!Array.isArray(e))throw new TypeError("Items is not a array!");if(!(t&&t instanceof Function))throw new TypeError("weight callback is not a function!");for(var n=0,a=0;a<e.length;a++){var l=t(e[a]);if("number"!=typeof l)throw new TypeError("weightCallback does not produce number!");n+=l}for(var r=Math.random()*n,o=0;o<e.length;o++)if((n-=t(e[o]))<=r)return e[o];return console.warn("rdwt weight fallback to the last item"),e[e.length-1]}(e,(function(e){return Number(e.frequency)}));return t&&n.german===t.german?w(e,t):n}var b=function(){var e=a.useContext(v).data,t=a.useContext(f).selectedProject,n=a.useState(w(e)),l=Object(c.a)(n,2),r=l[0],o=l[1],u=r.german,m=r.english,i=r.notes,s=r.frequency,d=r.context;return console.log(null===t||void 0===t?void 0:t.weightColumnName),a.createElement("div",{className:"p-4 h-full flex flex-col"},a.createElement("div",{className:"h-full flex-1"},a.createElement("div",null,a.createElement("span",{className:"text-sm px-2 py-1 rounded-md bg-orange-400"},"frequency: ",a.createElement("span",{className:"font-bold"},s)),a.createElement("span",null," "),a.createElement("span",{className:"text-sm px-2 py-1 rounded-md bg-orange-400"},"context: ",a.createElement("span",{className:"font-bold"},d))),a.createElement("div",{className:"h-4"}),a.createElement("div",null,a.createElement("h4",{className:"text-xl font-bold"},"German"),a.createElement("p",null,u)),a.createElement("div",{className:"h-4"}),a.createElement("div",null,a.createElement("h4",{className:"text-xl font-bold"},"English"),a.createElement("p",null,m)),a.createElement("div",{className:"h-4"}),""!==i&&a.createElement("div",null,a.createElement("h4",{className:"text-xl font-bold"},"Notes"),a.createElement("p",null,i))),a.createElement("button",{className:"bg-indigo-700 text-white rounded-md shadow-sm px-4 py-2 w-full",onClick:function(){o(w(e,r))}},"Next"))};var x=function(){return l.a.createElement(g,null,l.a.createElement(p,null,l.a.createElement("div",{className:"flex items-center justify-center"},l.a.createElement("div",{style:{width:"600px"},className:"bg-gray-200 max-w-md w-64 max-h-full h-screen"},l.a.createElement(b,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.87d2b054.chunk.js.map